@page "(id.long)"
@using Microsoft.AspNetCore.Mvc.RazorPages
@using ShopWeb.Infrastucture
@using ShopWeb.Models
@model IndexModel
@{
}

<h1>Welcome to the ShopWeb application</h1>

<partial name="_ProductPartial"model="Model.Product"/>

@functions{
    public class IndexModel : PageModel
     {
        private DataContext _context;
        public Product Product { get; set; }
        public IndexModel(DataContext context)
        {
            _context = context;
        }

        public async Task<IActionResult> OnGet(long id = 1)
        {
            Product = await _context.Products.FindAsync(id);
            if(Product == null)
            {
              //  return NotFound();
                return RedirectToPage("NotFound");
            }
            return Page();
        }
     }
}